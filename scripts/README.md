# üì¶ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è FORECAST

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ü–µ–Ω–∫–∏ —Ä–µ—à–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è –ø–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä—ã–Ω–∫–æ–≤.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. **prepare_data.py** ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ train/test
2. **evaluate_submission.py** ‚Äî –û—Ü–µ–Ω–∫–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
3. **baseline_solution.py** ‚Äî Baseline —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
python scripts/prepare_data.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:**
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç `data/raw/candles.csv` –∏ `data/raw/news.csv`
- ‚úÖ –í—ã—á–∏—Å–ª—è–µ—Ç —Ç–∞—Ä–≥–µ—Ç—ã (–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –Ω–∞ 1 –∏ 20 –¥–Ω–µ–π)
- ‚úÖ –†–∞–∑–±–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ train/test –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ë–ï–ó —Ç–∞—Ä–≥–µ—Ç–æ–≤ –≤ test)
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ (–° —Ç–∞—Ä–≥–µ—Ç–∞–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
data/processed/
‚îú‚îÄ‚îÄ participants/           # –î–õ–Ø –£–ß–ê–°–¢–ù–ò–ö–û–í
‚îÇ   ‚îú‚îÄ‚îÄ train_candles.csv   # Train —Å —Ç–∞—Ä–≥–µ—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_candles.csv    # Test –ë–ï–ó —Ç–∞—Ä–≥–µ—Ç–æ–≤ ‚ö†Ô∏è
‚îÇ   ‚îú‚îÄ‚îÄ train_news.csv
‚îÇ   ‚îî‚îÄ‚îÄ test_news.csv
‚îú‚îÄ‚îÄ organizers/             # –î–õ–Ø –û–†–ì–ê–ù–ò–ó–ê–¢–û–†–û–í
‚îÇ   ‚îú‚îÄ‚îÄ test_candles_with_targets.csv  # Test –° —Ç–∞—Ä–≥–µ—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ ground_truth.csv               # –¢–æ–ª—å–∫–æ —Ç–∞—Ä–≥–µ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_news_full.csv
‚îî‚îÄ‚îÄ metadata.json
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ baseline —Ä–µ—à–µ–Ω–∏—è

```bash
python scripts/baseline_solution.py
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `baseline_submission.csv` —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏.

### –®–∞–≥ 3: –û—Ü–µ–Ω–∫–∞ —Ä–µ—à–µ–Ω–∏—è

```bash
python scripts/evaluate_submission.py baseline_submission.csv
```

–≠—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏ –∏—Ç–æ–≥–æ–≤—ã–π score.

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç train_candles.csv (–¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `open` | –¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è | 100.5 |
| `close` | –¶–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è | 101.2 |
| `high` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ | 102.0 |
| `low` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ | 100.0 |
| `volume` | –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤ | 1000000 |
| `begin` | –î–∞—Ç–∞ | 2025-01-15 |
| `ticker` | –¢–∏–∫–µ—Ä | SBER |
| `target_return_1d` | **–¢–∞—Ä–≥–µ—Ç:** –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–∞ 1 –¥–µ–Ω—å | 0.0234 |
| `target_return_20d` | **–¢–∞—Ä–≥–µ—Ç:** –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–∞ 20 –¥–Ω–µ–π | 0.1245 |
| `target_direction_1d` | **–¢–∞—Ä–≥–µ—Ç:** –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (1=—Ä–æ—Å—Ç, 0=–ø–∞–¥–µ–Ω–∏–µ) | 1 |
| `target_direction_20d` | **–¢–∞—Ä–≥–µ—Ç:** –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (1=—Ä–æ—Å—Ç, 0=–ø–∞–¥–µ–Ω–∏–µ) | 1 |

### –§–æ—Ä–º–∞—Ç test_candles.csv (–¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –í test –¥–∞–Ω–Ω—ã—Ö –ù–ï–¢ –∫–æ–ª–æ–Ω–æ–∫ —Å —Ç–∞—Ä–≥–µ—Ç–∞–º–∏!

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `open` | –¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è |
| `close` | –¶–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è |
| `high` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ |
| `low` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ |
| `volume` | –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤ |
| `begin` | –î–∞—Ç–∞ |
| `ticker` | –¢–∏–∫–µ—Ä |

### –§–æ—Ä–º–∞—Ç news.csv

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `publish_date` | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ |
| `title` | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏ |
| `publication` | –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç |
| `tickers` | –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ä—ã (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º) |

---

## üì§ –§–æ—Ä–º–∞—Ç submission —Ñ–∞–π–ª–∞

–£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞—Ç—å CSV —Ñ–∞–π–ª —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```csv
ticker,begin,pred_return_1d,pred_return_20d,pred_prob_up_1d,pred_prob_up_20d
SBER,2025-05-02,0.01,0.05,0.6,0.7
GAZP,2025-05-02,-0.005,0.02,0.45,0.55
...
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:**
- `ticker` ‚Äî —Ç–∏–∫–µ—Ä –∞–∫—Ç–∏–≤–∞
- `begin` ‚Äî –¥–∞—Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞
- `pred_return_1d` ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–∞ 1 –¥–µ–Ω—å (float)
- `pred_return_20d` ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–∞ 20 –¥–Ω–µ–π (float)
- `pred_prob_up_1d` ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–æ—Å—Ç–∞ –Ω–∞ 1 –¥–µ–Ω—å (–æ—Ç 0 –¥–æ 1)
- `pred_prob_up_20d` ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–æ—Å—Ç–∞ –Ω–∞ 20 –¥–Ω–µ–π (–æ—Ç 0 –¥–æ 1)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞ –∫–∞–∂–¥—É—é –ø–∞—Ä—É (ticker, date) –∏–∑ test –¥–∞–Ω–Ω—ã—Ö
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1]
- –î–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–º–∏ (–Ω–æ —Ä–∞–∑—É–º–Ω—ã–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä [-0.5, 0.5])

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏

### 1. MAE (Mean Absolute Error) –¥–ª—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π

–ò–∑–º–µ—Ä—è–µ—Ç —Å—Ä–µ–¥–Ω—é—é –∞–±—Å–æ–ª—é—Ç–Ω—É—é –æ—à–∏–±–∫—É –≤ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏:

```
MAE = mean(|pred_return - true_return|)
```

**–¶–µ–ª—å:** –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–º–µ–Ω—å—à–µ = –ª—É—á—à–µ)

### 2. Accuracy –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è

–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (—Ä–æ—Å—Ç/–ø–∞–¥–µ–Ω–∏–µ):

```
Accuracy = mean(sign(pred_return) == sign(true_return))
```

**–¶–µ–ª—å:** –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–±–æ–ª—å—à–µ = –ª—É—á—à–µ)

### 3. Directional Accuracy (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è)

–û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏:

```
Directional = mean((pred_prob > 0.5) == (true_return > 0))
```

### 4. –ò—Ç–æ–≥–æ–≤—ã–π Score (–∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π)

```
Score = w1 * (1 - MAE_normalized) + w2 * Accuracy + w3 * DirectionalAccuracy
```

–ì–¥–µ:
- `w1 = 0.3` (–≤–µ—Å MAE)
- `w2 = 0.4` (–≤–µ—Å Accuracy)
- `w3 = 0.3` (–≤–µ—Å DirectionalAccuracy)
- –ò—Ç–æ–≥–æ–≤—ã–π score —É—Å—Ä–µ–¥–Ω—è–µ—Ç—Å—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–º (1–¥ –∏ 20–¥)

**–î–∏–∞–ø–∞–∑–æ–Ω:** [0, 1], –≥–¥–µ 1 = –∏–¥–µ–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### prepare_data.py

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—ã —Ä–∞–∑–±–∏–µ–Ω–∏—è train/test:

```python
preparer = DataPreparer(
    train_end_date="2025-05-01",   # –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞ train
    test_start_date="2025-05-02",  # –ü–µ—Ä–≤–∞—è –¥–∞—Ç–∞ test
    test_end_date="2025-06-01"     # –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞ test
)
```

### baseline_solution.py

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã baseline –º–æ–¥–µ–ª–∏:

```python
baseline = BaselineSolution(
    window_size=5  # –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –¥–ª—è –º–æ–º–µ–Ω—Ç—É–º–∞
)
```

---

## üéØ –ß—Ç–æ –æ—Ç–¥–∞–≤–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º vs –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º

### ‚úÖ –î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ø—É–±–ª–∏—á–Ω—ã–π –ø–∞–∫–µ—Ç)

**–§–∞–π–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:**
```
participants_data.zip
‚îú‚îÄ‚îÄ train_candles.csv      # –° —Ç–∞—Ä–≥–µ—Ç–∞–º–∏
‚îú‚îÄ‚îÄ test_candles.csv       # –ë–ï–ó —Ç–∞—Ä–≥–µ—Ç–æ–≤ ‚ö†Ô∏è
‚îú‚îÄ‚îÄ train_news.csv
‚îú‚îÄ‚îÄ test_news.csv
‚îî‚îÄ‚îÄ sample_submission.csv  # –ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞
```

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**
1. –û–±—É—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å –Ω–∞ `train_candles.csv` (—Ç–∞—Ä–≥–µ—Ç—ã –µ—Å—Ç—å)
2. –î–µ–ª–∞–π—Ç–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–ª—è `test_candles.csv` (—Ç–∞—Ä–≥–µ—Ç–æ–≤ –Ω–µ—Ç!)
3. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `sample_submission.csv`
4. –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ submission –¥–ª—è –æ—Ü–µ–Ω–∫–∏

### üîê –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø–∞–∫–µ—Ç)

**–§–∞–π–ª—ã –ù–ï –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
```
organizers_data.zip
‚îú‚îÄ‚îÄ test_candles_with_targets.csv  # –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ç–∞—Ä–≥–µ—Ç–∞–º–∏
‚îú‚îÄ‚îÄ ground_truth.csv               # –¢–æ–ª—å–∫–æ —Ç–∞—Ä–≥–µ—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îî‚îÄ‚îÄ test_news_full.csv             # –ü–æ–ª–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (—Å –±—É–¥—É—â–∏–º–∏)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python scripts/evaluate_submission.py participant_submission.csv
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
python scripts/prepare_data.py

# 2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä baseline
python scripts/baseline_solution.py

# 3. –û—Ü–µ–Ω–∏—Ç—å baseline
python scripts/evaluate_submission.py baseline_submission.csv

# 4. –£–ø–∞–∫–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
cd data/processed/participants
zip -r ../../../participants_data.zip *
```

### –ü—Ä–∏–º–µ—Ä 2: –û—Ü–µ–Ω–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö submission

```bash
for submission in submissions/*.csv; do
    echo "Evaluating $submission"
    python scripts/evaluate_submission.py "$submission" "reports/$(basename $submission .csv)_report.json"
done
```

### –ü—Ä–∏–º–µ—Ä 3: –°–æ–∑–¥–∞–Ω–∏–µ dummy submission –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
python scripts/evaluate_submission.py --create-dummy
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ (temporal leakage prevention)

- **–¶–µ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–æ –º–æ–º–µ–Ω—Ç–∞ t:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞
- **–ù–æ–≤–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–æ t-1:** –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ 1 –¥–µ–Ω—å (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- **–¢–∞—Ä–≥–µ—Ç –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ t+N:** –ë—É–¥—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏

### 2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ç–∞—Ä–≥–µ—Ç–æ–≤

–í baseline –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–ø—Ä–æ—â–µ–Ω–∏–µ: `adj_close = close`

**–§–æ—Ä–º—É–ª–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏:**
```
return = (adj_close_{t+N} / adj_close_t) - 1
```

–î–ª—è production —Ä–µ—à–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ adj_close —Å —É—á–µ—Ç–æ–º —Å–ø–ª–∏—Ç–æ–≤ –∏ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

- –í train: –°—Ç—Ä–æ–∫–∏ –±–µ–∑ —Ç–∞—Ä–≥–µ—Ç–æ–≤ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í test: –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω—É–ª—è–º–∏ (—à—Ç—Ä–∞—Ñ –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç—å)

### 4. –ì–æ—Ä–∏–∑–æ–Ω—Ç—ã –ø—Ä–æ–≥–Ω–æ–∑–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 –¥–µ–Ω—å –∏ 20 –¥–Ω–µ–π

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `prepare_data.py`:
```python
self.horizons = [1, 20]  # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å [5, 10, 20] –∏ —Ç.–¥.
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è baseline

1. **ML –º–æ–¥–µ–ª–∏:**
   - LightGBM / XGBoost –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
   - LSTM / Transformer –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤

2. **Feature engineering:**
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (RSI, MACD, Bollinger Bands)
   - –õ–∞–≥–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–ø—Ä–æ—à–ª—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏)
   - –ö—Ä–æ—Å—Å-–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É —Ç–∏–∫–µ—Ä–∞–º–∏)

3. **NLP –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π:**
   - Sentiment analysis (BERT, FinBERT)
   - Topic modeling (LDA, BERTopic)
   - Named Entity Recognition

4. **–ê–Ω—Å–∞–º–±–ª–∏:**
   - –°—Ç–µ–∫–∏–Ω–≥ –º–æ–¥–µ–ª–µ–π
   - Weighted averaging

### –ü–æ–ª–µ–∑–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
# Time series
import pandas as pd
import numpy as np
from sklearn.metrics import mean_absolute_error, accuracy_score

# ML models
from lightgbm import LGBMRegressor
from xgboost import XGBRegressor

# NLP
from transformers import BertTokenizer, BertForSequenceClassification
import torch

# Technical indicators
import ta
```

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫: `pip install -r requirements.txt`

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –≤ —Ä–∞–º–∫–∞—Ö —Ö–∞–∫–∞—Ç–æ–Ω–∞ Finam x HSE Trade AI.


